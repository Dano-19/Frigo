<div class="card" style="
    background: linear-gradient(to bottom right, #ffffff, #f0f8ff);
    border-radius: 1rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    padding: 2rem;
    margin: 2rem auto;
    font-family: 'Segoe UI', sans-serif;
    max-width: 1100px;
">

    <h1 style="
        color: #007acc;
        text-align: center;
        margin-bottom: 1.5rem;
        font-size: 2rem;
        font-weight: bold;
        border-bottom: 3px solid #ffa366;
        padding-bottom: 0.5rem;
        text-transform: uppercase;
    ">Formulario</h1>

    <p-button (onClick)="mostrarDialog()" label="Nuevo Formulario" class="p-button-success"></p-button>

    <p-dialog
        header="Formulario"
        [(visible)]="dialog_visible"
        [modal]="true"
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
        [style]="{ width: '30vw' }"
        [draggable]="false"
        [resizable]="false"
        class="p-fluid"
        style="border-radius: 1rem;">

        <form [formGroup]="categoriaForm">
            <!-- Fecha -->
            <div class="field" style="margin-bottom: 1rem;">
                <label for="fecha" style="font-weight: 600; color: #007acc;">Fecha</label>
                <input type="date" pInputText id="fecha" formControlName="fecha" class="input-field" />
                <div *ngIf="categoriaForm.get('fecha')?.invalid && categoriaForm.get('fecha')?.touched" class="error-message">
                    Fecha es obligatoria y debe tener el formato correcto.
                </div>
            </div>

            <!-- Area -->
            <div class="field" style="margin-bottom: 1rem;">
                <label for="area" style="font-weight: 600; color: #007acc;">Área</label>
                <input type="text" pInputText id="area" formControlName="area" class="input-field" />
                <div *ngIf="categoriaForm.get('area')?.invalid && categoriaForm.get('area')?.touched" class="error-message">
                    El área es obligatoria.
                </div>
            </div>

            <!-- Marca -->
            <div class="field" style="margin-bottom: 1rem;">
                <label for="marca" style="font-weight: 600; color: #007acc;">Marca</label>
                <input type="text" pInputText id="marca" formControlName="marca" class="input-field" />
                <div *ngIf="categoriaForm.get('marca')?.invalid && categoriaForm.get('marca')?.touched" class="error-message">
                    La marca es obligatoria.
                </div>
            </div>

            <!-- Modelo -->
            <div class="field" style="margin-bottom: 1rem;">
                <label for="modelo" style="font-weight: 600; color: #007acc;">Modelo</label>
                <input type="text" pInputText id="modelo" formControlName="modelo" class="input-field" />
                <div *ngIf="categoriaForm.get('modelo')?.invalid && categoriaForm.get('modelo')?.touched" class="error-message">
                    El modelo es obligatorio.
                </div>
            </div>

            <!-- Tipo -->
            <div class="field" style="margin-bottom: 1rem;">
                <label for="tipo" style="font-weight: 600; color: #007acc;">Tipo</label>
                <input type="text" pInputText id="tipo" formControlName="tipo" class="input-field" />
                <div *ngIf="categoriaForm.get('tipo')?.invalid && categoriaForm.get('tipo')?.touched" class="error-message">
                    El tipo es obligatorio.
                </div>
            </div>

            <!-- Descripción de Trabajo -->
            <div class="field" style="margin-bottom: 1rem;">
                <label for="descripcionTrabajo" style="font-weight: 600; color: #007acc;">Descripción de Trabajo</label>
                <textarea pInputTextarea formControlName="descripcionTrabajo" class="input-field" rows="3"></textarea>
                <div *ngIf="categoriaForm.get('descripcionTrabajo')?.invalid && categoriaForm.get('descripcionTrabajo')?.touched" class="error-message">
                    La descripción de trabajo es obligatoria.
                </div>
            </div>

            <!-- Cantidad y Materiales -->
            <div class="field" style="margin-bottom: 1rem; display: flex;">
                <div style="width: 50%; padding-right: 10px;">
                    <label for="cantidad" style="font-weight: 600; color: #007acc;">Cantidad</label>
                    <input type="number" pInputText id="cantidad" formControlName="cantidad" class="input-field" />
                    <div *ngIf="categoriaForm.get('cantidad')?.invalid && categoriaForm.get('cantidad')?.touched" class="error-message">
                        La cantidad es obligatoria y debe ser un número.
                    </div>
                </div>
                <div style="width: 50%; padding-left: 10px;">
                    <label for="materiales" style="font-weight: 600; color: #007acc;">Materiales</label>
                    <input type="text" pInputText id="materiales" formControlName="materiales" class="input-field" />
                    <div *ngIf="categoriaForm.get('materiales')?.invalid && categoriaForm.get('materiales')?.touched" class="error-message">
                        El campo materiales es obligatorio.
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
        </form>

        <ng-template pTemplate="footer">
            <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text"
                    style="color: #007acc;" (click)="dialog_visible=false"></button>
            <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text p-button-success"
                    [disabled]="isSaving" (click)="guardarCategoria()"></button>
        </ng-template>
    </p-dialog>

    <!-- Tabla de Categorías -->
    <p-table [value]="categorias" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
            <tr style="background-color: #007acc; color: white;">
                <th style="padding: 0.75rem;">ID</th>
                <th style="padding: 0.75rem;">Fecha</th>
                <th style="padding: 0.75rem;">Área</th>
                <th style="padding: 0.75rem;">Marca</th>
                <th style="padding: 0.75rem;">Modelo</th>
                <th style="padding: 0.75rem;">Tipo</th>
                <th style="padding: 0.75rem;">Descripción Trabajo</th>
                <th style="padding: 0.75rem;">Cantidad</th>
                <th style="padding: 0.75rem;">Materiales</th>
                <th style="padding: 0.75rem;">Acciones</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-categoria>
            <tr style="background-color: #ffffff; transition: background 0.3s;"
                onmouseover="this.style.backgroundColor='#ffe5cc'"
                onmouseout="this.style.backgroundColor='#ffffff'">
                <td style="padding: 0.75rem;">{{ categoria.id }}</td>
                <td style="padding: 0.75rem;">{{ categoria.fecha }}</td>
                <td style="padding: 0.75rem;">{{ categoria.area }}</td>
                <td style="padding: 0.75rem;">{{ categoria.marca }}</td>
                <td style="padding: 0.75rem;">{{ categoria.modelo }}</td>
                <td style="padding: 0.75rem;">{{ categoria.tipo }}</td>
                <td style="padding: 0.75rem;">{{ categoria.descripcionTrabajo }}</td>
                <td style="padding: 0.75rem;">{{ categoria.cantidad }}</td>
                <td style="padding: 0.75rem;">{{ categoria.materiales }}</td>
                <td style="padding: 0.75rem;">
                    <div class="flex" style="gap: 0.5rem;">
                        <button pButton pRipple icon="pi pi-pencil"
                                class="p-button-rounded p-button-success"
                                style="background-color: #007acc; border: none;"
                                (click)="editarCategoria(categoria)">
                        </button>
                        <button pButton pRipple icon="pi pi-trash"
                                class="p-button-rounded p-button-warning"
                                style="background-color: #ff6b00; border: none;"
                                (click)="eliminarCategoria(categoria)">
                        </button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>

</div>
