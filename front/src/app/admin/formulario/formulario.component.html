<p-panel header="Reporte">
  <div class="p-fluid grid p-4" style="background:#f5f5f5; border-radius:8px">

    <div class="col-12 mb-3">
      <label class="font-medium">Nombre de la empresa</label>
      <input type="text" pInputText [(ngModel)]="empresa" disabled class="w-full" />
    </div>

    <div class="col-12 mb-3">
      <label class="font-medium">Datos Ticket</label>
      <input type="text" pInputText [(ngModel)]="ticketId" disabled class="w-full" />
    </div>

    <div class="col-12 mb-3">
      <label class="font-medium">Estado</label>
      <input type="text" pInputText [(ngModel)]="estado" class="w-full" />
    </div>

    <div class="col-6 mb-3">
      <label class="font-medium">Hora de entrada</label>
      <input type="time" pInputText [(ngModel)]="horaEntrada" class="w-full" />
    </div>
    <div class="col-6 mb-3">
      <label class="font-medium">Hora de salida</label>
      <input type="time" pInputText [(ngModel)]="horaSalida" class="w-full" />
    </div>

    <!-- Equipos Parte 1 -->
    <div class="col-12 mb-4">
      <div class="grid font-bold mb-2">
        <div class="col">Área</div>
        <div class="col">Marca</div>
        <div class="col">Modelo</div>
        <div class="col">Serie</div>
      </div>
      <div class="grid mb-2">
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['area0']" class="w-full" />
        </div>
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['marca0']" class="w-full" />
        </div>
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['modelo0']" class="w-full" />
        </div>
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['serie0']" class="w-full" />
        </div>
      </div>
    </div>

    <!-- Equipos Parte 2 -->
    <div class="col-12 mb-4">
      <div class="grid font-bold mb-2">
        <div class="col">Tipo</div>
        <div class="col">Capacidad</div>
        <div class="col">PSI</div>
        <div class="col">AMP</div>
      </div>
      <div class="grid mb-2">
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['tipo0']" class="w-full" />
        </div>
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['capacidad0']" class="w-full" />
        </div>
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['psi0']" class="w-full" />
        </div>
        <div class="col">
          <input type="text" pInputText [(ngModel)]="datosEquipo['amp0']" class="w-full" />
        </div>
      </div>
    </div>

    <!-- Descripción -->
    <div class="col-12 mb-3">
      <label class="font-medium">Descripción</label>
      <textarea rows="4" pInputTextarea [(ngModel)]="descripcion" class="w-full" style="resize: none;"></textarea>
    </div>

    <!-- Materiales -->
    <div class="col-12 mb-3">
      <label class="font-medium">Materiales</label>
      <p-dropdown 
        [options]="materialesDisponibles" 
        [(ngModel)]="materialSeleccionado" 
        optionLabel="nombre"
        placeholder="Buscar o seleccionar material"
        [filter]="true"
        (onChange)="agregarMaterial()" 
        class="w-full">
      </p-dropdown>
    </div>

    <!-- Tabla de materiales seleccionados -->
    <div class="col-12 mb-4">
      <p-table [value]="materialesSeleccionados" styleClass="p-datatable-sm">
        <ng-template pTemplate="header">
          <tr>
            <th>Material</th>
            <th>Cantidad</th>
            <th>Acciones</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-mat>
          <tr>
            <td>{{ mat.nombre }}</td>
            <td>
              <input type="number" pInputText [(ngModel)]="mat.cantidad" style="width: 60px;" />
            </td>
            <td>
              <button 
                pButton 
                icon="pi pi-trash" 
                class="p-button-danger p-button-sm" 
                (click)="eliminarMaterial(mat.nombre)">
              </button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- Recomendación -->
    <div class="col-12 mb-3">
      <label class="font-medium">Recomendación</label>
      <textarea rows="3" pInputTextarea [(ngModel)]="recomendacion" class="w-full" style="resize: none;"></textarea>
    </div>

    <!-- Botón -->
    <div class="col-12 text-right">
      <button pButton label="Guardar" (click)="guardarReporte()" class="p-button-secondary"></button>
    </div>

  </div>
</p-panel>
